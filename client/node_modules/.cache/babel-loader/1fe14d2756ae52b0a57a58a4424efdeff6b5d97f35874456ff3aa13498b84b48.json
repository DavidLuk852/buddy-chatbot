{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'axios';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[sidebarOpen,setSidebarOpen]=useState(false);const[isLoading,setIsLoading]=useState(false);const[theme,setTheme]=useState('light');const chatWindowRef=useRef(null);// Scroll to the bottom of the chat window when messages change\nuseEffect(()=>{if(chatWindowRef.current){chatWindowRef.current.scrollTop=chatWindowRef.current.scrollHeight;}},[messages]);// Load theme from localStorage on mount\nuseEffect(()=>{const savedTheme=localStorage.getItem('theme')||'light';setTheme(savedTheme);document.documentElement.className=savedTheme;},[]);// Handle theme change\nconst handleThemeChange=e=>{const selectedTheme=e.target.value;setTheme(selectedTheme);localStorage.setItem('theme',selectedTheme);document.documentElement.className=selectedTheme;};const handleSend=async()=>{if(!input.trim())return;const userMessage={text:input,sender:'user'};setMessages([...messages,userMessage]);setInput('');setIsLoading(true);try{const response=await axios.post('http://localhost:5000/api/chat',{message:input});setMessages(prev=>[...prev,{text:response.data.response,sender:'bot'}]);}catch(error){console.error('Error fetching bot response:',error);setMessages(prev=>[...prev,{text:\"Sorry, something went wrong: \".concat(error.message||'Unknown error'),sender:'bot'}]);}finally{setIsLoading(false);}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey&&e.target.value.trim()){e.preventDefault();handleSend();}else if(e.key==='Enter'&&e.shiftKey){e.preventDefault();setInput(input+'\\n');}};const toggleSidebar=()=>setSidebarOpen(!sidebarOpen);// Useful links data\nconst usefulLinks=[{title:'HKBU Library Opening Hours',url:'https://library.hkbu.edu.hk/using-the-library/opening-hours/regular-service-hours/'},{title:'HKBU Course Add/Drop',url:'https://ar.hkbu.edu.hk/student-services/new-student-orientation/study/course-add-drop-for-new-students'},{title:'HKBU Academic Calendar',url:'https://ar.hkbu.edu.hk/academic-calendar/2025-2026'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container \".concat(theme,\" \").concat(sidebarOpen?'sidebar-open':''),children:[/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Toggle sidebar\",className:\"sidebar-toggle\",onClick:toggleSidebar,children:\"\\u2630\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar \".concat(sidebarOpen?'open':''),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Theme:\",/*#__PURE__*/_jsxs(\"select\",{value:theme,onChange:handleThemeChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"light\",children:\"Light\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dark\",children:\"Dark\"})]})]}),/*#__PURE__*/_jsx(\"li\",{children:\"Model: Llama-3.1\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"links-sidebar\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Useful Links\"}),/*#__PURE__*/_jsx(\"ul\",{children:usefulLinks.map((link,index)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:link.url,target:\"_blank\",rel:\"noopener noreferrer\",children:link.title})},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"centered-chat\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-wrapper\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"app-header\",children:\"BUddy: Your AI Guide\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-window\",ref:chatWindowRef,children:[messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(msg.sender),children:/*#__PURE__*/_jsx(\"div\",{className:\"message-bubble\",children:msg.text.split('\\n').map((line,i)=>/*#__PURE__*/_jsx(\"div\",{children:line},i))})},index)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Thinking...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"textarea\",{\"aria-label\":\"Chat input\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Ask me anything about HKBU... (Press Shift + Enter for new line)\",rows:\"3\",style:{resize:'vertical'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,\"aria-label\":\"Send message\",children:/*#__PURE__*/_jsx(\"img\",{src:\"Send.png\",alt:\"Send Icon\",className:\"button-icon\"})})]})]})})})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsx","_jsx","jsxs","_jsxs","App","messages","setMessages","input","setInput","sidebarOpen","setSidebarOpen","isLoading","setIsLoading","theme","setTheme","chatWindowRef","current","scrollTop","scrollHeight","savedTheme","localStorage","getItem","document","documentElement","className","handleThemeChange","e","selectedTheme","target","value","setItem","handleSend","trim","userMessage","text","sender","response","post","message","prev","data","error","console","concat","handleKeyPress","key","shiftKey","preventDefault","toggleSidebar","usefulLinks","title","url","children","onClick","onChange","map","link","index","href","rel","ref","msg","split","line","i","onKeyPress","placeholder","rows","style","resize","src","alt"],"sources":["C:/Users/lukda/buddy-chatbot/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [theme, setTheme] = useState('light');\n  const chatWindowRef = useRef(null);\n\n  // Scroll to the bottom of the chat window when messages change\n  useEffect(() => {\n    if (chatWindowRef.current) {\n      chatWindowRef.current.scrollTop = chatWindowRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Load theme from localStorage on mount\n  useEffect(() => {\n    const savedTheme = localStorage.getItem('theme') || 'light';\n    setTheme(savedTheme);\n    document.documentElement.className = savedTheme;\n  }, []);\n\n  // Handle theme change\n  const handleThemeChange = (e) => {\n    const selectedTheme = e.target.value;\n    setTheme(selectedTheme);\n    localStorage.setItem('theme', selectedTheme);\n    document.documentElement.className = selectedTheme;\n  };\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = { text: input, sender: 'user' };\n    setMessages([...messages, userMessage]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      const response = await axios.post('http://localhost:5000/api/chat', { message: input });\n      setMessages((prev) => [...prev, { text: response.data.response, sender: 'bot' }]);\n    } catch (error) {\n      console.error('Error fetching bot response:', error);\n      setMessages((prev) => [\n        ...prev,\n        { text: `Sorry, something went wrong: ${error.message || 'Unknown error'}`, sender: 'bot' },\n      ]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey && e.target.value.trim()) {\n      e.preventDefault();\n      handleSend();\n    } else if (e.key === 'Enter' && e.shiftKey) {\n      e.preventDefault();\n      setInput(input + '\\n');\n    }\n  };\n\n  const toggleSidebar = () => setSidebarOpen(!sidebarOpen);\n\n  // Useful links data\n  const usefulLinks = [\n    {\n      title: 'HKBU Library Opening Hours',\n      url: 'https://library.hkbu.edu.hk/using-the-library/opening-hours/regular-service-hours/',\n    },\n    {\n      title: 'HKBU Course Add/Drop',\n      url: 'https://ar.hkbu.edu.hk/student-services/new-student-orientation/study/course-add-drop-for-new-students',\n    },\n    {\n      title: 'HKBU Academic Calendar',\n      url: 'https://ar.hkbu.edu.hk/academic-calendar/2025-2026',\n    },\n  ];\n\n  return (\n    <div className={`app-container ${theme} ${sidebarOpen ? 'sidebar-open' : ''}`}>\n      <button\n        aria-label=\"Toggle sidebar\"\n        className=\"sidebar-toggle\"\n        onClick={toggleSidebar}\n      >\n        â˜°\n      </button>\n      <div className={`sidebar ${sidebarOpen ? 'open' : ''}`}>\n        <h2>Settings</h2>\n        <ul>\n          <li>\n            Theme:\n            <select value={theme} onChange={handleThemeChange}>\n              <option value=\"light\">Light</option>\n              <option value=\"dark\">Dark</option>\n            </select>\n          </li>\n          <li>Model: Llama-3.1</li>\n        </ul>\n      </div>\n      <div className=\"links-sidebar\">\n        <h2>Useful Links</h2>\n        <ul>\n          {usefulLinks.map((link, index) => (\n            <li key={index}>\n              <a href={link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {link.title}\n              </a>\n            </li>\n          ))}\n        </ul>\n      </div>\n      <div className=\"main-content-wrapper\">\n        <div className=\"centered-chat\">\n          <div className=\"main-content\">\n            <div className=\"chat-container\">\n              <div className=\"header-wrapper\">\n                <h1 className=\"app-header\">BUddy: Your AI Guide</h1>\n              </div>\n              <div className=\"chat-window\" ref={chatWindowRef}>\n                {messages.map((msg, index) => (\n                  <div key={index} className={`message ${msg.sender}`}>\n                    <div className=\"message-bubble\">\n                      {msg.text.split('\\n').map((line, i) => (\n                        <div key={i}>{line}</div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n                {isLoading && <div className=\"loading\">Thinking...</div>}\n              </div>\n              <div className=\"input-area\">\n                <textarea\n                  aria-label=\"Chat input\"\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyPress={handleKeyPress}\n                  placeholder=\"Ask me anything about HKBU... (Press Shift + Enter for new line)\"\n                  rows=\"3\"\n                  style={{ resize: 'vertical' }}\n                />\n                <button onClick={handleSend} aria-label=\"Send message\">\n                  <img src=\"Send.png\" alt=\"Send Icon\" className=\"button-icon\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnB,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAmB,aAAa,CAAGjB,MAAM,CAAC,IAAI,CAAC,CAElC;AACAD,SAAS,CAAC,IAAM,CACd,GAAIkB,aAAa,CAACC,OAAO,CAAE,CACzBD,aAAa,CAACC,OAAO,CAACC,SAAS,CAAGF,aAAa,CAACC,OAAO,CAACE,YAAY,CACtE,CACF,CAAC,CAAE,CAACb,QAAQ,CAAC,CAAC,CAEd;AACAR,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsB,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAI,OAAO,CAC3DP,QAAQ,CAACK,UAAU,CAAC,CACpBG,QAAQ,CAACC,eAAe,CAACC,SAAS,CAAGL,UAAU,CACjD,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAM,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAAC,aAAa,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CACpCf,QAAQ,CAACa,aAAa,CAAC,CACvBP,YAAY,CAACU,OAAO,CAAC,OAAO,CAAEH,aAAa,CAAC,CAC5CL,QAAQ,CAACC,eAAe,CAACC,SAAS,CAAGG,aAAa,CACpD,CAAC,CAED,KAAM,CAAAI,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CAACxB,KAAK,CAACyB,IAAI,CAAC,CAAC,CAAE,OAEnB,KAAM,CAAAC,WAAW,CAAG,CAAEC,IAAI,CAAE3B,KAAK,CAAE4B,MAAM,CAAE,MAAO,CAAC,CACnD7B,WAAW,CAAC,CAAC,GAAGD,QAAQ,CAAE4B,WAAW,CAAC,CAAC,CACvCzB,QAAQ,CAAC,EAAE,CAAC,CACZI,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACF,KAAM,CAAAwB,QAAQ,CAAG,KAAM,CAAArC,KAAK,CAACsC,IAAI,CAAC,gCAAgC,CAAE,CAAEC,OAAO,CAAE/B,KAAM,CAAC,CAAC,CACvFD,WAAW,CAAEiC,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAE,CAAEL,IAAI,CAAEE,QAAQ,CAACI,IAAI,CAACJ,QAAQ,CAAED,MAAM,CAAE,KAAM,CAAC,CAAC,CAAC,CACnF,CAAE,MAAOM,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDnC,WAAW,CAAEiC,IAAI,EAAK,CACpB,GAAGA,IAAI,CACP,CAAEL,IAAI,iCAAAS,MAAA,CAAkCF,KAAK,CAACH,OAAO,EAAI,eAAe,CAAE,CAAEH,MAAM,CAAE,KAAM,CAAC,CAC5F,CAAC,CACJ,CAAC,OAAS,CACRvB,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAgC,cAAc,CAAIlB,CAAC,EAAK,CAC5B,GAAIA,CAAC,CAACmB,GAAG,GAAK,OAAO,EAAI,CAACnB,CAAC,CAACoB,QAAQ,EAAIpB,CAAC,CAACE,MAAM,CAACC,KAAK,CAACG,IAAI,CAAC,CAAC,CAAE,CAC7DN,CAAC,CAACqB,cAAc,CAAC,CAAC,CAClBhB,UAAU,CAAC,CAAC,CACd,CAAC,IAAM,IAAIL,CAAC,CAACmB,GAAG,GAAK,OAAO,EAAInB,CAAC,CAACoB,QAAQ,CAAE,CAC1CpB,CAAC,CAACqB,cAAc,CAAC,CAAC,CAClBvC,QAAQ,CAACD,KAAK,CAAG,IAAI,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAAyC,aAAa,CAAGA,CAAA,GAAMtC,cAAc,CAAC,CAACD,WAAW,CAAC,CAExD;AACA,KAAM,CAAAwC,WAAW,CAAG,CAClB,CACEC,KAAK,CAAE,4BAA4B,CACnCC,GAAG,CAAE,oFACP,CAAC,CACD,CACED,KAAK,CAAE,sBAAsB,CAC7BC,GAAG,CAAE,wGACP,CAAC,CACD,CACED,KAAK,CAAE,wBAAwB,CAC/BC,GAAG,CAAE,oDACP,CAAC,CACF,CAED,mBACEhD,KAAA,QAAKqB,SAAS,kBAAAmB,MAAA,CAAmB9B,KAAK,MAAA8B,MAAA,CAAIlC,WAAW,CAAG,cAAc,CAAG,EAAE,CAAG,CAAA2C,QAAA,eAC5EnD,IAAA,WACE,aAAW,gBAAgB,CAC3BuB,SAAS,CAAC,gBAAgB,CAC1B6B,OAAO,CAAEL,aAAc,CAAAI,QAAA,CACxB,QAED,CAAQ,CAAC,cACTjD,KAAA,QAAKqB,SAAS,YAAAmB,MAAA,CAAalC,WAAW,CAAG,MAAM,CAAG,EAAE,CAAG,CAAA2C,QAAA,eACrDnD,IAAA,OAAAmD,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBjD,KAAA,OAAAiD,QAAA,eACEjD,KAAA,OAAAiD,QAAA,EAAI,QAEF,cAAAjD,KAAA,WAAQ0B,KAAK,CAAEhB,KAAM,CAACyC,QAAQ,CAAE7B,iBAAkB,CAAA2B,QAAA,eAChDnD,IAAA,WAAQ4B,KAAK,CAAC,OAAO,CAAAuB,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpCnD,IAAA,WAAQ4B,KAAK,CAAC,MAAM,CAAAuB,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC5B,CAAC,EACP,CAAC,cACLnD,IAAA,OAAAmD,QAAA,CAAI,kBAAgB,CAAI,CAAC,EACvB,CAAC,EACF,CAAC,cACNjD,KAAA,QAAKqB,SAAS,CAAC,eAAe,CAAA4B,QAAA,eAC5BnD,IAAA,OAAAmD,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBnD,IAAA,OAAAmD,QAAA,CACGH,WAAW,CAACM,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAC3BxD,IAAA,OAAAmD,QAAA,cACEnD,IAAA,MAAGyD,IAAI,CAAEF,IAAI,CAACL,GAAI,CAACvB,MAAM,CAAC,QAAQ,CAAC+B,GAAG,CAAC,qBAAqB,CAAAP,QAAA,CACzDI,IAAI,CAACN,KAAK,CACV,CAAC,EAHGO,KAIL,CACL,CAAC,CACA,CAAC,EACF,CAAC,cACNxD,IAAA,QAAKuB,SAAS,CAAC,sBAAsB,CAAA4B,QAAA,cACnCnD,IAAA,QAAKuB,SAAS,CAAC,eAAe,CAAA4B,QAAA,cAC5BnD,IAAA,QAAKuB,SAAS,CAAC,cAAc,CAAA4B,QAAA,cAC3BjD,KAAA,QAAKqB,SAAS,CAAC,gBAAgB,CAAA4B,QAAA,eAC7BnD,IAAA,QAAKuB,SAAS,CAAC,gBAAgB,CAAA4B,QAAA,cAC7BnD,IAAA,OAAIuB,SAAS,CAAC,YAAY,CAAA4B,QAAA,CAAC,sBAAoB,CAAI,CAAC,CACjD,CAAC,cACNjD,KAAA,QAAKqB,SAAS,CAAC,aAAa,CAACoC,GAAG,CAAE7C,aAAc,CAAAqC,QAAA,EAC7C/C,QAAQ,CAACkD,GAAG,CAAC,CAACM,GAAG,CAAEJ,KAAK,gBACvBxD,IAAA,QAAiBuB,SAAS,YAAAmB,MAAA,CAAakB,GAAG,CAAC1B,MAAM,CAAG,CAAAiB,QAAA,cAClDnD,IAAA,QAAKuB,SAAS,CAAC,gBAAgB,CAAA4B,QAAA,CAC5BS,GAAG,CAAC3B,IAAI,CAAC4B,KAAK,CAAC,IAAI,CAAC,CAACP,GAAG,CAAC,CAACQ,IAAI,CAAEC,CAAC,gBAChC/D,IAAA,QAAAmD,QAAA,CAAcW,IAAI,EAARC,CAAc,CACzB,CAAC,CACC,CAAC,EALEP,KAML,CACN,CAAC,CACD9C,SAAS,eAAIV,IAAA,QAAKuB,SAAS,CAAC,SAAS,CAAA4B,QAAA,CAAC,aAAW,CAAK,CAAC,EACrD,CAAC,cACNjD,KAAA,QAAKqB,SAAS,CAAC,YAAY,CAAA4B,QAAA,eACzBnD,IAAA,aACE,aAAW,YAAY,CACvB4B,KAAK,CAAEtB,KAAM,CACb+C,QAAQ,CAAG5B,CAAC,EAAKlB,QAAQ,CAACkB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAE,CAC1CoC,UAAU,CAAErB,cAAe,CAC3BsB,WAAW,CAAC,kEAAkE,CAC9EC,IAAI,CAAC,GAAG,CACRC,KAAK,CAAE,CAAEC,MAAM,CAAE,UAAW,CAAE,CAC/B,CAAC,cACFpE,IAAA,WAAQoD,OAAO,CAAEtB,UAAW,CAAC,aAAW,cAAc,CAAAqB,QAAA,cACpDnD,IAAA,QAAKqE,GAAG,CAAC,UAAU,CAACC,GAAG,CAAC,WAAW,CAAC/C,SAAS,CAAC,aAAa,CAAE,CAAC,CACxD,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAApB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}